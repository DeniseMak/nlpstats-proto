<!DOCTYPE html>
<html>
<head>
    <link href="{{ url_for('static', filename='modal.css')}}" rel="stylesheet"/>
    <link href="{{ url_for('static', filename='breadcrumbs.css')}}" rel="stylesheet"/>
    <link href="{{ url_for('static', filename='tooltip.css')}}" rel="stylesheet"/>
        <link href="{{ url_for('static', filename='other.css')}}" rel="stylesheet"/>
</head>
<script type="text/javascript">
    function da_submit_func() {
            console.log(document.getElementById('da_hidden').value)
            console.log("clicked DA submit!")
        }
        // document.getElementById('da_submit')
        
        
        
        
        
        function openTab(evt, tabName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(tabName).style.display = "block";
          evt.currentTarget.className += " active";
        }
</script>


<body>

    <div class="header">
        <h1>System Performance Calculator</h1>
    </div>

    <div class="top_bar">

        <!-- Trigger/Open The Modal -->
        <button id="btn_about">About</button>
        <button id="btn_settings">Modify or Save/Restore Settings</button>
        <button id="btn_download">Download Report</button>

    </div>

    <div class="roundpurple">
        <ul class="breadcrumb">
            <li><button onclick="openTab(event, 'Data Analysis')">Data Analysis</button></li>
            <li><button onclick="openTab(event, 'Significance Test')">Significance</button></li>
            <li><button onclick="openTab(event, 'Effect Size')">Effect Size</button></li>
            <li><button onclick="openTab(event, 'Post-test Power Analysis')">Power Analysis</button></li>
        </ul>
    </div>

    <div id='Data Analysis' class="tabcontent" style="display:block">
        <!-- Data Analysis form -->
        <form action="/" class="form-horizontal" enctype="multipart/form-data" method="post">
            <!-- Begin Data Analysis div -->
            <div class="roundpurplebottom" style="position:relative; top: -18px;">

                <!-- Data Analysis: File Button -->
                <div class="form-group">

                    <label class="col-md-4 control-label" for="system_file">System File:</label>

                    <div class="tooltip">?
                        <span class="tooltiptext">"{{help1}}"</span></div>
                    <div class="col-md-4">
                        <input type="file" id="system_file" name="system_file" style="display:none;" required/>
                        <a href="#" class="button"><label for="system_file">Select</label></a> {{file_uploaded}}

                        <!--
          <input id="system_file" name="system_file" class="input-file" type="file"/>
             -->

                    </div>
                </div>
                <br>
                <!-- Data Analysis: Evaluation Unit size-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="eval_unit_size">Evaluation Unit Size:</label>
                    <div class="tooltip">?
                        <span class="tooltiptext">This should be a whole number between one and the number of data points.</span>
                    </div>
                    <div class="col-md-4">
                        <input id="eval_unit_size" name="eval_unit_size" type="number" value="{{ eval_unit_size }}" class="form-control input-md" required="">
                        <!-- previously had value="1" -->

                    </div>
                </div>
                <br>
                <!-- Data Analysis: Multiple Radios (mean or median)  -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="target_statistic">Target Statistic:</label>
                    <div class="tooltip">?
                        <span class="tooltiptext">"{{help2}}"</span></div>
                    <div class="col-md-4">
                        <label class="radio-inline" for="target_statistic-0">
            <input type="radio" name="target_statistic" id="target_statistic-0" value="mean" checked="checked">
            Mean
          </label>
                        <label class="radio-inline" for="target_statistic-1">
            <input type="radio" name="target_statistic" id="target_statistic-1" value="median">
            Median
          </label>
                    </div>
                </div>
                <br>
                <!-- Seed input-->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="seed">Random Seed:</label>
                    <div class="tooltip">?
                        <span class="tooltiptext">If you would like to provide a (real number) seed number, enter it here. Otherwise, we will shuffle.</span>
                    </div>
                    <div class="col-md-4">
                        <input id="seed" name="seed" type="number" placeholder="Shuffle" step="0.01" class="form-control input-md">

                    </div>
                </div>
                <br>
                <!-- Data Analysis Submit Button -->
                <div class="form-group">
                    <label class="col-md-4 control-label" for="submit"></label>
                    <div class="col-md-4">
                        <input type="hidden" id="da_hidden" value="hidden101">
                        <!-- Is type=submit implied by class="btn btn-success" -->
                        <button id="submit" name="submit" type=submit class="btn btn-success" onsubmit="da_submit_func()">Run</button>
                        <!-- Button for JS script-->
                        <!-- <a href=# id=process_input><button class='btn btn-default' >Submit via JS</button></a> -->
                    </div>
                </div>

            </div>
        </form>
        <!-- End data analysis form -->

        <div class="roundgreen" class="hiddendiv" id="hidden">

            <!-- SUMMARY STATISTICS -->
            <h2>{{ summary_str }}</h2>
            {% if summary_stats_dict|length %}
            <table border=1>

                <tr>
                    <th>Score</th>
                    <th>mean</th>
                    <th>median</th>
                    <th>std_dev</th>
                    <th>min</th>
                    <th>max</th>
                </tr>

                {% for key, value in summary_stats_dict.items() %}

                <tr>
                    <!--
                                  <td> {{ key }} </td> <td>{{ value }}</td> -->
                    <td> {{ key }} </td>
                    {% for k, v in value.items() %}
                    <td>{{ v }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
            {% endif %}

            <!-- RECOMMENDATION for test statistics -->
            <h2 id=teststat_heading align='left'>{{ teststat_heading }}</h2>
            {% if mean_or_median %}
            <b>Normality:</b>The data distribution {% if is_normal %} passes {% else %} does not pass {% endif %} the normality test.
            <p></p>
            <b>Skewness:</b> The data distribution {% if mean_or_median == 'median' %} exceeds {% else %} does not exceed {% endif %} the skew threshold.
            <p></p>
            <b>Test statistic:</b> Based on the skewness, the recommended test statistic to use is:
            <b>{{ mean_or_median }}</b> {% endif %}

            <!-- RECOMMENDATION for significance tests with REASONS -->
            <h2 id=sigtest_heading align='left'>
                {{ result_str }}</h2>
            {% if recommended_tests_reasons|length %}
            <table border=1>

                <tr>
                    <th>Test</th>
                    <th>Reason</th>
                </tr>

                {% for key, value in recommended_tests_reasons.items() %}
                <tr>
                    <td> {{ key }} </td>
                    <td>{{ value }}</td>
                </tr>
                {% endfor %}
            </table>
            {% endif %}
            <!-- (Bulleted list example) -->
            <!--
                       The following tests are recommended:
                       <ul>
                         {% for name in recommended_tests %}
                         <li> {{ name }} (Reason: {{ test_reason }})</li>
                         {% endfor %}
                       </ul>
                       -->

            <!-- Images -->
            {% if hist_score1 %}
            <img id=hist_score1 src="{{ hist_score1 }}?{{ rand }}"> {% endif %} {% if hist_score2 %}
            <img id=hist_score2 src="{{ hist_score2 }}?{{ rand }}"> {% endif %} {% if hist_diff %}
            <img id=hist_diff src="{{ hist_diff }}?{{ rand }}"> {% endif %} {% if hist_diff_par %}
            <img id=hist_diff_par src="{{ hist_diff_par }}?{{ rand }}"> {% endif %}

        </div>
    </div>

    <div id='Significance Test' class="tabcontent" style="display:none">

        <div class="roundpurplebottom" style="position:relative; top: -18px;">

            <form action="/" class="form-horizontal" enctype="multipart/form-data" method="post">

                <div class="form-group">
                    <!-- SIGNIFICANCE TEST RECOMMENDATION for test statistics -->
                    <h2 id=sigtest_heading align='left'>{{ result_str }}</h2>
                    {% if recommended_tests_reasons|length %}
                    <!--
                            <table border = 1>

                            <tr><th>Test</th><th>Reason</th></tr>

                                 {% for key, value in recommended_tests_reasons.items() %}
                                    <tr>
                                       <td> {{ key }} </td> <td>{{ value }}</td>
                                    </tr>
                                 {% endfor %}
                            </table>
                        <ul>
                                 {% for key, value in recommended_tests_reasons.items() %}
                            <li>{{ key }}
                                <div class="tooltip">?
                                    <span class="tooltiptext">{{ value }}</span>
                                </div>
                            </li>
                                 {% endfor %}
                        </ul>
                        -->
                    <!-- <h2>Choose the significance test to run</h2> -->
                    <!-- radio button to choose test -->
                    {% for key, value in recommended_tests_reasons.items() %}
                    <label class="radio-inline" for="target_sig_test-1">
                        <input type="radio" name="target_sig_test" id="target_sig_test-1" value={{ key }}>
                            {{ key }}
                                <div class="tooltip">?
                                    <span class="tooltiptext">{{ value }}</span>
                                </div>
                        </label>
                    <p></p>
                    {% endfor %} {% endif %}
                    <br/>
                    <p></p>
                    <label class="col-md-4 control-label" for="effect_size">Significance level &alpha;:</label>
                    <div class="tooltip">?
                        <span class="tooltiptext">The significance level.</span>
                    </div>
                    <div class="col-md-4">
                        <input id="significance_level" name="significance_level" type="number" placeholder="0.00" class="form-control input-md" required="" step="0.01" min="0" max="1">
                    </div>
                </div>

                <br>
                <div class="form-group">
                    <label class="col-md-4 control-label" for="submit"></label>
                    <div class="col-md-4">
                        <input type="hidden" id="sa_hidden" value="hidden101">
                        <!-- Is type=submit implied by class="btn btn-success" ? -->
                        <input type="hidden" id="sig_tab_name" name="sig_tab_name" value="SignificanceTabHidden-2" />
                        <button id="submit" name="submit" type=submit class="btn btn-success">Run</button>
                        <!-- Button for JS script-->
                        <!-- <a href=# id=process_input><button class='btn btn-default' >Submit via JS</button></a> -->
                    </div>
                </div>

        </div>
        </form>
        <!-- End Significance Test form -->

        <div class="roundgreen" class="hiddendiv" id="hidden">

        </div>
    </div>

    <div id='Effect Size' class="tabcontent" style="display:none">

        <div class="roundpurplebottom" style="position:relative; top: -18px;">

            <!-- Effect Size Multiple Radios (inline)  -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="target_statistic">Target Statistic:</label>
                <div class="col-md-4">
                    <label class="radio-inline" for="target_statistic-0">
              <input type="radio" name="effect_size_target_statistic" id="target_statistic-0" value="mean" checked="checked">
              Mean
            </label>
                    <label class="radio-inline" for="target_statistic-1">
              <input type="radio" name="effect_size_target_statistic" id="target_statistic-1" value="median">
              Median
            </label>
                </div>
            </div>

            <br>
            <!-- effect size Submit Button -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="submit"></label>
                <div class="col-md-4">
                    <input type="hidden" id="da_hidden" value="hidden101">
                    <!-- Is type=submit implied by class="btn btn-success" -->
                    <button id="ef_submit" name="ef_submit" type=submit class="btn btn-success" onsubmit="ef_submit_func()">Run</button>
                    <!-- Button for JS script-->
                    <!-- <a href=# id=process_input><button class='btn btn-default' >Submit via JS</button></a> -->
                </div>
            </div>
        </div>
        <!-- end Effect Size tab -->

        <div class="roundgreen" class="hiddendiv" id="hidden">

        </div>
    </div>

    <div id='Post-test Power Analysis' class="tabcontent" style="display:none">

        <div class="roundpurplebottom" style="position:relative; top: -18px;">

            <!-- Multiple Radios -->
            <div class="form-group">

                <label class="col-md-4 control-label" for="effect_size">Effect Size:</label>
                <div class="tooltip">?<span class="tooltiptext">"{{help1}}"</span></div>
                <div class="col-md-4">
                    <input id="effect_size" name="effect_size" type="number" placeholder="default" class="form-control input-md" required="">

                </div>
                <br>

                <label class="col-md-4 control-label" for="sample_size">Sample Size:</label>
                <div class="tooltip">?<span class="tooltiptext">"{{help1}}"</span> </div>
                <div class="col-md-4">
                    <input id="start" name="start" type="number" placeholder="Start" class="form-control input-md" required="">
                    <input id="end" name="end" type="number" placeholder="End" class="form-control input-md" required="">
                    <input id="step_size" name="step_size" type="number" placeholder="Step Size" class="form-control input-md" required="">
                </div>

                <br>
                <label class="col-md-4 control-label" for="iterations">Iterations Per Sample Size:</label>
                <div class="tooltip">?<span class="tooltiptext">"{{help1}}"</span></div>
                <div class="col-md-4">
                    <input id="iterations" name="iterations" type="number" placeholder="default" class="form-control input-md" required="">

                </div>

                <br>
                <label class="col-md-4 control-label" for="method">Power Analysis Method:</label>
                <div class="tooltip">?<span class="tooltiptext">"{{help1}}"</span></div>
                <div class="col-md-4">
                    <div class="radio">
                        <label for="method-0">
              <input type="radio" name="method" id="method-0" value="monte_carlo" checked="checked">
              Monte Carlo
            </label>
                    </div>
                    <div class="radio">
                        <label for="method-1">
              <input type="radio" name="method" id="method-1" value="bootstrap">
              Bootstrap
            </label>
                    </div>
                    <div class="radio">
                        <label for="method-2">
              <input type="radio" name="method" id="method-2" value="analysis">
              Analysis
            </label>
                    </div>
                </div>
            </div>
            <br>
            <!-- Power Submit Button -->
            <div class="form-group">
                <label class="col-md-4 control-label" for="submit"></label>
                <div class="col-md-4">
                    <input type="hidden" id="da_hidden" value="hidden101">

                    <button id="ef_submit" name="ef_submit" type=submit class="btn btn-success" onsubmit="pa_submit_func()">Run</button>
                </div>
            </div>

        </div>

        <div class="roundgreen" class="hiddendiv" id="hidden">

        </div>
        </div>

        <!-- The Modal -->
        <div id="about" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
                <button id="close_btn_about">&#x2715;</button>
                <p>Copyright 2020 by AUTHORS. See our paper at LINK. This website is released under the LICENSE at LINK. LIST OF TECH USED AND THEIR LICENSES and CITATIONS.</p>

            </div>
        </div>

        <!-- The Modal -->
        <div id="settings" class="modal">

            <!-- Modal content -->
            <div class="modal-content">

                <button id="close_btn_settings">&#x2715;</button>
                <p>LIST OF SETTINGS ITEMS</p>

                <button id="restore">Save Settings to File</button>
                <button id="save">Restore Settings from File</button>

            </div>
        </div>

        <!-- The Modal -->
        <div id="download" class="modal">

            <!-- Modal content -->
            <div class="modal-content">

                <button id="close_btn_download">&#x2715;</button>

                <p>
                    <form action="{{ url_for('.download_file') }}" method="get" target="_blank">
                        <button type="submit">Download</button>
                    </form>
                </p>

            </div>
        </div>

        <script>
            // Make modals and buttons
            var modals = ["about",  "settings", "download"];
            function make_modal(val){
                eval("var modal_" + val + " = document.getElementById(\"" + val +"\");");
                eval("var btn_" + val + " = document.getElementById(\"btn_" + val +"\");");
                // When the user clicks the button, open the modal
                eval("btn_" + val + ".onclick = function() { " + val + ".style.display = \"block\"; }");
                eval("close_btn_" + val + ".onclick = function() { modal_" + val + ".style.display = \"none\"; }");
            }
            modals.forEach(make_modal);
        </script>

</body>

</html>
